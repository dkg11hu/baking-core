The Dual-Track Architecture DocumentationTrack 1: The Selection & Parametrization Workflow (Variable)This track is the "Intelligence" layer. It gathers environmental variables to transform the generic recipe into a specific Action Plan.Objective: Define physical constraints and scale the recipe.Data Source: registry (Ingredients/Formula) + physics_categories (Constraints).User Inputs: target_weight, ambient_temp, flour_temp.Logic Engine: Formula.mjs.State: Mutable. The baker can adjust values here to see how hydration or timings change.ComponentResponsibilityOutputGalleryFiltering by territory (Map) or flavor.selectedIdParametrizatorGenerating inputs based on physics_categories.User_ParametersResolverApplying math: $Mass_{Final} = \sum (Ingredients \times Scale)$.Resolved_RecipeTrack 2: The Production Workflow (Locked)Once the baker exits Parametrization, the system enters the Execution Layer. All math is now finalized; the driver simply manages the human-hardware interface.Objective: Guided execution of the Resolved_Recipe.Data Source: technologies (Steps/Videos/Tools).User Interaction: Navigation (NEXT / BACK) and Timer interaction.Logic Engine: Driver.mjs.State: Immutable. The recipe is locked; the baker only follows the sequence.Navigation State MachineThe application transitions through these four distinct states. Note that Step 0 is the bridge between the two workflows.IndexViewWorkflowPurposeN/Abrowser-viewDiscoveryBrowse International/Regional catalog.N/Aparams-viewTrack 1Input Temp/Weight; Calculate Resolved_Recipe.-1workflow-viewBridgeGateway: Choice between History or Start Bake.0...Nworkflow-viewTrack 2Execute locked steps (Video/Timer/Tools).Database Schema Requirements (SSoT)To support this documentation, the definitions.json must provide:physics_categories: Defines which variables (Temp, Weight) are required for specific product types.logic_behaviors: Defines how the system reacts to those variables (e.g., "If Temp > 24, reduce fermentation by 10%").technology_ref: The link to the locked production steps.Code Implementation LogicJavaScript// Logic-Blind Transition Map
const WorkflowMap = {
    FROM_BROWSER: (id) => Params.init(id),      // Workflow 1 Start
    FROM_PARAMS:  (id) => Driver.start(id),     // Workflow 2 Start (Locked)
    FROM_DRIVER:  (step) => Driver.render(step) // Linear Execution
};